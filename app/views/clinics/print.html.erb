<% content_for :head do %>
<script type="text/javascript"> 
    window.onload = function() { window.print(); } 
</script>
<% end %>
<h1><%= @clinic.vaxtype + " clinic on " + @clinic.clinicdate.strftime("%A, %B %d")%></h1>

<style>
  
    .time {
        font-size: 150% !important;
        font-weight: "bold" !important;
    }
    td {
  			font-size:18px !important;
	}



</style>


 <% hourCount= @clinic.starthour %>



 <% while hourCount <= @clinic.finishhour %>
      <% if hourCount == @clinic.starthour %>
              <% minCount = @clinic.startminute %>
      <% else %>
          <% minCount=0 %>
      <% end %>
      <% while minCount < 60  and !(minCount >= @clinic.finishminute and hourCount == @clinic.finishhour) %>
          <% @count = @clinic.bookers.where(bookhour: hourCount, bookminute: minCount).count %>

            
        
            <div class="row">
              	<div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 col-sx-offset-3 col-sm-offset-3 col-md-offset-3 col-lg-offset-3">
              	 	<h2><%= formatTime(hourCount,minCount) %></h2>  
              	</div>
              	 
              	<div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 col-sx-offset-3 col-sm-offset-3 col-md-offset-3 col-lg-offset-3">
					<h3><%= @count %> / <%= @clinic.people %></h3>
                 </div> 
             </div>       
             <div class="row">                         
                                           
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                  
                      <table class="table">
                        <thead>
                          <tr>
                          		<th>Name</th>
                          		<th>DOB</th>
                          		<th>Age</th>
                          		<th>Dose</th>
                          		<th>Consent</th>
                          		<th>Arm</th>
                          		<th>Batch Number</th>
                          		<th>Billed</th>
                         </tr>
                        </thead>
                        <tbody>
                          <% @clinic.bookers.where(bookhour: hourCount, bookminute: minCount).order(:surname, :firstname).each do | booker | %>
                          <tr>
                                            <td><%= booker.surname %>, <%= booker.firstname %></td>
                                          
                                            <td><%= booker.dob.strftime("%d/%m/%Y") %></td>
                                            <td><%= booker.age.to_s %></td>
                                            <td></td>
                                            <td><input type="checkbox"></td>
                                            <td>  L   R  </td>
                                            <td></td>
                                            <td><input type="checkbox"></td>
                                            
  
                            </tr>            

                          <% end %>
                                   <tr>
                                            <td></td>
                                          
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td><input type="checkbox"></td>
                                            <td>  L   R  </td>
                                            <td></td>
                                            <td><input type="checkbox"></td>
                                            
  
                            </tr>  
                                            <tr>
                                            <td></td>
                                          
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td><input type="checkbox"></td>
                                            <td>  L   R  </td>
                                            <td></td>
                                            <td><input type="checkbox"></td>
                                            
  
                            </tr>  
                        </tbody>
                      </table>


                
              </div>
            </div>


            <div class="row page-break-before">
           
            </div>

          










         <% minCount = minCount + ( 60  / @clinic.perhour) %>
      <% end %>
      <% hourCount = hourCount + 1 %>
  <% end %>
